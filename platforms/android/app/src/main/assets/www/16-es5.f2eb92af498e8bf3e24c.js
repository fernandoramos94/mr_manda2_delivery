!function(){function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{k578:function(t,i,o){"use strict";o.r(i),o.d(i,"EditProfilePageModule",function(){return P});var a=o("ofXK"),c=o("3Pt+"),r=o("TEn/"),l=o("tyNb"),d=o("mrSG"),s=o("H+bZ"),u=o("2Rin"),b=o("a/9d"),g=o("fXoL");function p(n,e){if(1&n){var t=g.Pb();g.Ob(0,"ion-button",1),g.Wb("click",function(){g.lc(t);var n=g.Yb();return n.edit_flag=!n.edit_flag}),g.Mb(1,"ion-icon",18),g.Nb()}}function f(n,e){if(1&n){var t=g.Pb();g.Ob(0,"ion-button",1),g.Wb("click",function(){return g.lc(t),g.Yb().update()}),g.Mb(1,"ion-icon",19),g.Nb()}}var h,m,v,_=function(n){return{"background-image":n}},O=[{path:"",component:(h=function(){function t(e,i,o,a,c){n(this,t),this.util=e,this.api=i,this.actionSheetController=o,this.camera=a,this.navCtrl=c,this.cover="",this.edit_flag=!0,console.log(localStorage.getItem("uid")),this.getProfile()}var i,o,a;return i=t,(o=[{key:"ngOnInit",value:function(){}},{key:"getProfile",value:function(){var n=this,e={id:localStorage.getItem("uid")};this.util.show(),this.api.post("drivers/getById",e).then(function(e){if(n.util.hide(),console.log("user info=>",e),e&&200===e.status&&e.data&&e.data.length){var t=e.data[0];n.util.userInfo=t,n.fname=t.first_name,n.lname=t.last_name,n.mobile=t.mobile,n.gender=t.gender,n.cover=t.cover,n.email=t.email,n.current="active"===t.current}},function(e){console.log(e),n.util.hide()})}},{key:"updateProfile",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var e,t=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.actionSheetController.create({header:this.util.translate("Choose from"),buttons:[{text:"Camera",icon:"camera",handler:function(){console.log("camera clicked"),t.upload("camera")}},{text:this.util.translate("Gallery"),icon:"images",handler:function(){console.log("gallery clicked"),t.upload("gallery")}},{text:this.util.translate("Cancel"),icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}]});case 2:return e=n.sent,n.next=5,e.present();case 5:case"end":return n.stop()}},n,this)}))}},{key:"update",value:function(){var n=this;if(!this.fname||""===this.fname||!this.lname||""===this.lname||!this.mobile||""===this.mobile)return this.util.errorToast("Todos los campos son requeridos"),!1;var e={first_name:this.fname,last_name:this.lname,email:this.email,gender:this.gender,cover:this.cover,mobile:this.mobile,id:localStorage.getItem("uid"),current:!0===this.current?"active":"busy"};this.util.show("Actualizando..."),this.api.post("drivers/edit_profile",e).then(function(e){n.util.hide(),console.log(e),n.getProfile()},function(e){n.util.hide(),console.log(e)})}},{key:"back",value:function(){this.navCtrl.back()}},{key:"upload",value:function(n){var e=this;try{this.camera.getPicture({quality:100,targetHeight:800,targetWidth:800,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,sourceType:"camera"===n?this.camera.PictureSourceType.CAMERA:this.camera.PictureSourceType.PHOTOLIBRARY}).then(function(n){console.log("url->",n),e.util.show("Cargando...");var t={img:n,type:"jpg"};console.log("parma==>",t),e.api.nativePost("users/upload_file",t).then(function(n){e.util.hide(),console.log("data",JSON.parse(n.data));var t=JSON.parse(n.data);e.cover=t.data,console.log("cover image",e.cover);var i={cover:e.cover,id:localStorage.getItem("uid")};e.util.show(e.util.translate("Updating...")),e.api.post("users/edit_profile",i).then(function(n){e.util.hide(),console.log(n),e.getProfile()},function(n){e.util.hide(),console.log(n)})},function(n){console.log(n),e.util.hide(),e.util.errorToast("Algo ha ido mal")}).catch(function(n){console.log(n),e.util.hide(),e.util.errorToast("Algo ha ido mal")})})}catch(t){console.log("error",t),this.util.errorToast("Algo ha ido mal")}}}])&&e(i.prototype,o),a&&e(i,a),t}(),h.\u0275fac=function(n){return new(n||h)(g.Lb(u.a),g.Lb(s.a),g.Lb(r.a),g.Lb(b.a),g.Lb(r.V))},h.\u0275cmp=g.Fb({type:h,selectors:[["app-edit-profile"]],decls:47,vars:19,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"t"],["slot","end"],[3,"click",4,"ngIf"],[1,"main_content_div"],[1,"main_div"],[1,"info_div"],[1,"user_img",3,"ngStyle","click"],[1,"name"],[1,"image_div"],["name","person-outline"],[1,"content_div"],["type","text",3,"disabled","placeholder","ngModel","ngModelChange"],["name","mail-outline"],["name","call-outline"],["slot","end",3,"disabled","ngModel","ngModelChange"],["slot","icon-only","name","pencil"],["slot","icon-only","name","checkmark"]],template:function(n,e){1&n&&(g.Ob(0,"ion-header"),g.Ob(1,"ion-toolbar"),g.Ob(2,"ion-buttons",0),g.Ob(3,"ion-button",1),g.Wb("click",function(){return e.back()}),g.Mb(4,"ion-icon",2),g.Nb(),g.Nb(),g.Ob(5,"ion-title",3),g.qc(6," Perfil "),g.Nb(),g.Ob(7,"ion-buttons",4),g.pc(8,p,2,0,"ion-button",5),g.pc(9,f,2,0,"ion-button",5),g.Nb(),g.Nb(),g.Nb(),g.Ob(10,"ion-content"),g.Ob(11,"div",6),g.Ob(12,"div",7),g.Ob(13,"div",8),g.Ob(14,"div",9),g.Wb("click",function(){return e.updateProfile()}),g.Nb(),g.Ob(15,"div",10),g.Ob(16,"div",11),g.Mb(17,"ion-icon",12),g.Nb(),g.Ob(18,"div",13),g.Ob(19,"span"),g.qc(20,"Nombre \xa0- "),g.Nb(),g.Ob(21,"ion-input",14),g.Wb("ngModelChange",function(n){return e.fname=n}),g.Nb(),g.Nb(),g.Nb(),g.Ob(22,"div",10),g.Ob(23,"div",11),g.Mb(24,"ion-icon",12),g.Nb(),g.Ob(25,"div",13),g.Ob(26,"span"),g.qc(27,"Apellido \xa0- "),g.Nb(),g.Ob(28,"ion-input",14),g.Wb("ngModelChange",function(n){return e.lname=n}),g.Nb(),g.Nb(),g.Nb(),g.Ob(29,"div",10),g.Ob(30,"div",11),g.Mb(31,"ion-icon",15),g.Nb(),g.Ob(32,"div",13),g.Ob(33,"span"),g.qc(34,"Correo \xa0- "),g.Nb(),g.Ob(35,"ion-input",14),g.Wb("ngModelChange",function(n){return e.email=n}),g.Nb(),g.Nb(),g.Nb(),g.Ob(36,"div",10),g.Ob(37,"div",11),g.Mb(38,"ion-icon",16),g.Nb(),g.Ob(39,"div",13),g.Ob(40,"span"),g.qc(41,"Tel\xe9fono \xa0- "),g.Nb(),g.Ob(42,"ion-input",14),g.Wb("ngModelChange",function(n){return e.mobile=n}),g.Nb(),g.Nb(),g.Nb(),g.Ob(43,"ion-item"),g.Ob(44,"ion-label"),g.qc(45,"Disponible "),g.Nb(),g.Ob(46,"ion-toggle",17),g.Wb("ngModelChange",function(n){return e.current=n}),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Nb()),2&n&&(g.Ab(8),g.ec("ngIf",e.edit_flag),g.Ab(1),g.ec("ngIf",!e.edit_flag),g.Ab(5),g.ec("ngStyle",g.ic(17,_,"url("+e.api.mediaURL+e.cover+"),url(assets/imgs/user.png)")),g.Ab(7),g.ec("disabled",e.edit_flag)("placeholder","Nombre")("ngModel",e.fname),g.Ab(7),g.ec("disabled",e.edit_flag)("placeholder","Apellido")("ngModel",e.lname),g.Ab(7),g.ec("disabled",!0)("placeholder","Correo")("ngModel",e.email),g.Ab(7),g.ec("disabled",e.edit_flag)("placeholder","Tel\xe9fono")("ngModel",e.mobile),g.Ab(4),g.ec("disabled",e.edit_flag)("ngModel",e.current))},directives:[r.o,r.P,r.i,r.h,r.p,r.N,a.j,r.k,a.k,r.q,r.cb,c.h,c.k,r.r,r.s,r.O,r.c],styles:["ion-button[_ngcontent-%COMP%]   .img_search[_ngcontent-%COMP%]{width:12px;margin-right:10px}.main_content_div[_ngcontent-%COMP%]{padding:20px}.main_content_div[_ngcontent-%COMP%]   .main_div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:60vh;justify-content:space-between}.main_content_div[_ngcontent-%COMP%]   .user_img[_ngcontent-%COMP%]{height:90px;width:90px;border-radius:50%;border:3px solid var(--ion-color-primary);margin:auto auto 30px;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:90px;position:relative}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 0 20px -3px rgba(30,98,255,.3);display:flex;flex-direction:row;padding:10px;justify-content:flex-start;position:relative;height:45px;margin-bottom:20px}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .image_div[_ngcontent-%COMP%]{width:20px;position:relative}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .icn[_ngcontent-%COMP%]{max-width:15px;position:absolute;top:50%;transform:translateY(-50%)}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row;margin-left:15px}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;color:#8992aa;padding-top:5px}.main_content_div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:11px;color:#454d62}.main_content_div[_ngcontent-%COMP%]   .btn_div[_ngcontent-%COMP%]{display:block;width:100%;text-align:center}.main_content_div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background:var(--ion-color-primary);--border-radius:3px;--color:#fff;font-weight:700;font-size:12px;height:40px;width:150px;text-transform:capitalize;--background-activated:rgba(159,201,165,.5);--color-actived:#fff}.main_content_div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   .logout_icon[_ngcontent-%COMP%]{width:12px}"]}),h)}],M=((m=function e(){n(this,e)}).\u0275fac=function(n){return new(n||m)},m.\u0275mod=g.Jb({type:m}),m.\u0275inj=g.Ib({imports:[[l.i.forChild(O)],l.i]}),m),C=o("PCNd"),P=((v=function e(){n(this,e)}).\u0275fac=function(n){return new(n||v)},v.\u0275mod=g.Jb({type:v}),v.\u0275inj=g.Ib({imports:[[a.b,c.e,r.Q,C.a,M]]}),v)}}])}();