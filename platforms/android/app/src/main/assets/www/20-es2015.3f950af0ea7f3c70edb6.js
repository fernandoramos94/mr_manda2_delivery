(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{F4UR:function(o,n,t){"use strict";t.r(n),t.d(n,"LoginPageModule",function(){return _});var e=t("ofXK"),i=t("3Pt+"),l=t("TEn/"),s=t("tyNb"),a=t("mrSG"),r=t("2Rin"),c=t("PSD3"),b=t.n(c),g=t("wljF"),d=t("hxji"),u=t("TCp9"),h=t("H+bZ"),p=t("fXoL");function m(o,n){1&o&&(p.Ob(0,"span"),p.qc(1,"INICIAR"),p.Nb())}function f(o,n){1&o&&p.Mb(0,"ion-spinner",19)}function O(o,n){if(1&o){const o=p.Pb();p.Ob(0,"form",5,6),p.Ob(2,"ion-list",7),p.Ob(3,"ion-item",7),p.Ob(4,"ion-input",8,9),p.Wb("ngModelChange",function(n){return p.lc(o),p.Yb().login.email=n}),p.Nb(),p.Nb(),p.Ob(6,"ion-text",10),p.Ob(7,"p",11),p.qc(8," Correo es requerido "),p.Nb(),p.Nb(),p.Ob(9,"ion-item",7),p.Ob(10,"ion-input",12,13),p.Wb("ngModelChange",function(n){return p.lc(o),p.Yb().login.password=n}),p.Nb(),p.Nb(),p.Ob(12,"ion-text",10),p.Ob(13,"p",11),p.qc(14," Contrase\xf1a es requerida "),p.Nb(),p.Nb(),p.Nb(),p.Ob(15,"ion-row",14),p.Ob(16,"ion-col",14),p.Ob(17,"p",15),p.Wb("click",function(){return p.lc(o),p.Yb().resetPass()}),p.qc(18,"Olvidaste tu contrase\xf1a?"),p.Nb(),p.Ob(19,"ion-button",16),p.Wb("click",function(){p.lc(o);const n=p.kc(1);return p.Yb().onLogin(n)}),p.pc(20,m,2,0,"span",17),p.pc(21,f,1,0,"ion-spinner",18),p.Nb(),p.Nb(),p.Nb(),p.Nb()}if(2&o){const o=p.kc(5),n=p.kc(11),t=p.Yb();p.Ab(4),p.ec("ngModel",t.login.email)("placeholder","Correo"),p.Ab(3),p.ec("hidden",o.valid||0==t.submitted),p.Ab(3),p.ec("ngModel",t.login.password)("placeholder","Contrase\xf1a"),p.Ab(3),p.ec("hidden",n.valid||0==t.submitted),p.Ab(6),p.ec("disabled",t.isLogin),p.Ab(1),p.ec("ngIf",!t.isLogin),p.Ab(1),p.ec("ngIf",t.isLogin)}}function C(o,n){if(1&o&&(p.Ob(0,"span"),p.qc(1),p.Nb()),2&o){const o=p.Yb(2);p.Ab(1),p.sc(" ",o.util.translate("Log In"),"")}}function M(o,n){1&o&&p.Mb(0,"ion-spinner",19)}function N(o,n){if(1&o){const o=p.Pb();p.Ob(0,"form",5,6),p.Ob(2,"ion-list",7),p.Ob(3,"ion-row"),p.Ob(4,"ion-col",20),p.Wb("click",function(){return p.lc(o),p.Yb().openCountry()}),p.Ob(5,"ion-item",7),p.Ob(6,"ion-input",21,22),p.Wb("ngModelChange",function(n){return p.lc(o),p.Yb().mobile.ccCode=n}),p.Nb(),p.Nb(),p.Nb(),p.Ob(8,"ion-col",23),p.Ob(9,"ion-item",7),p.Ob(10,"ion-input",24,25),p.Wb("ngModelChange",function(n){return p.lc(o),p.Yb().mobile.phone=n}),p.Nb(),p.Nb(),p.Ob(12,"ion-text",10),p.Ob(13,"p",11),p.qc(14),p.Nb(),p.Nb(),p.Nb(),p.Nb(),p.Ob(15,"ion-item",7),p.Ob(16,"ion-input",12,13),p.Wb("ngModelChange",function(n){return p.lc(o),p.Yb().mobile.password=n}),p.Nb(),p.Nb(),p.Ob(18,"ion-text",10),p.Ob(19,"p",11),p.qc(20),p.Nb(),p.Nb(),p.Nb(),p.Ob(21,"ion-row",14),p.Ob(22,"ion-col",14),p.Ob(23,"p",15),p.Wb("click",function(){return p.lc(o),p.Yb().resetPass()}),p.qc(24),p.Nb(),p.Ob(25,"ion-button",16),p.Wb("click",function(){p.lc(o);const n=p.kc(1);return p.Yb().onPhoneLogin(n)}),p.pc(26,C,2,1,"span",17),p.pc(27,M,1,0,"ion-spinner",18),p.Nb(),p.Nb(),p.Nb(),p.Nb()}if(2&o){const o=p.kc(11),n=p.kc(17),t=p.Yb();p.Ab(6),p.ec("ngModel",t.mobile.ccCode),p.Ab(4),p.ec("ngModel",t.mobile.phone)("placeholder",t.util.translate("Mobile Number")),p.Ab(3),p.ec("hidden",o.valid||0==t.submitted),p.Ab(1),p.sc(" ",t.util.translate("Phone number is required")," "),p.Ab(2),p.ec("ngModel",t.mobile.password)("placeholder",t.util.translate("Password")),p.Ab(3),p.ec("hidden",n.valid||0==t.submitted),p.Ab(1),p.sc(" ",t.util.translate("Password is required")," "),p.Ab(4),p.rc(t.util.translate("Forgot Password?")),p.Ab(1),p.ec("disabled",t.isLogin),p.Ab(1),p.ec("ngIf",!t.isLogin),p.Ab(1),p.ec("ngIf",t.isLogin)}}function w(o,n){if(1&o&&(p.Ob(0,"span"),p.qc(1),p.Nb()),2&o){const o=p.Yb(2);p.Ab(1),p.sc(" ",o.util.translate("Log In"),"")}}function P(o,n){1&o&&p.Mb(0,"ion-spinner",19)}function v(o,n){if(1&o){const o=p.Pb();p.Ob(0,"form",5,6),p.Ob(2,"ion-list",7),p.Ob(3,"ion-row"),p.Ob(4,"ion-col",20),p.Wb("click",function(){return p.lc(o),p.Yb().openCountry()}),p.Ob(5,"ion-item",7),p.Ob(6,"ion-input",21,22),p.Wb("ngModelChange",function(n){return p.lc(o),p.Yb().mobileLogin.ccCode=n}),p.Nb(),p.Nb(),p.Nb(),p.Ob(8,"ion-col",23),p.Ob(9,"ion-item",7),p.Ob(10,"ion-input",24,25),p.Wb("ngModelChange",function(n){return p.lc(o),p.Yb().mobileLogin.phone=n}),p.Nb(),p.Nb(),p.Ob(12,"ion-text",10),p.Ob(13,"p",11),p.qc(14),p.Nb(),p.Nb(),p.Nb(),p.Nb(),p.Nb(),p.Ob(15,"ion-row",14),p.Ob(16,"ion-col",14),p.Ob(17,"p",15),p.Wb("click",function(){return p.lc(o),p.Yb().resetPass()}),p.qc(18),p.Nb(),p.Ob(19,"ion-button",16),p.Wb("click",function(){p.lc(o);const n=p.kc(1);return p.Yb().onOTPLogin(n)}),p.pc(20,w,2,1,"span",17),p.pc(21,P,1,0,"ion-spinner",18),p.Nb(),p.Nb(),p.Nb(),p.Nb()}if(2&o){const o=p.kc(11),n=p.Yb();p.Ab(6),p.ec("ngModel",n.mobileLogin.ccCode),p.Ab(4),p.ec("ngModel",n.mobileLogin.phone)("placeholder",n.util.translate("Mobile Number")),p.Ab(3),p.ec("hidden",o.valid||0==n.submitted),p.Ab(1),p.sc(" ",n.util.translate("Phone number is required")," "),p.Ab(4),p.rc(n.util.translate("Forgot Password?")),p.Ab(1),p.ec("disabled",n.isLogin),p.Ab(1),p.ec("ngIf",!n.isLogin),p.Ab(1),p.ec("ngIf",n.isLogin)}}const L=[{path:"",component:(()=>{class o{constructor(o,n,t,e,i,l,s,a){this.router=o,this.api=n,this.util=t,this.navCtrl=e,this.oneSignal=i,this.menuController=l,this.modalController=s,this.modalCtrl=a,this.login={email:"",password:""},this.mobile={ccCode:"",phone:"",password:""},this.mobileLogin={ccCode:"",phone:""},this.submitted=!1,this.isLogin=!1,console.log("--------------- user login",this.util.user_login),this.mobile.ccCode="+91",this.mobileLogin.ccCode="+91",this.oneSignal.getIds().then(o=>{console.log("iddddd==========",o),localStorage.setItem("fcm",o.userId)})}ngOnInit(){}onLogin(o){if(console.log("form",o),this.submitted=!0,o.valid){if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.login.email))return this.util.showToast(this.util.translate("Please enter valid email"),"danger","bottom"),!1;console.log("login"),this.isLogin=!0,this.api.post("drivers/login",this.login).then(o=>{if(this.isLogin=!1,console.log(o),o&&200===o.status)if("1"===o.data.status){localStorage.setItem("uid",o.data.id),this.util.userInfo=o.data,this.menuController.enable(!0);const n=localStorage.getItem("fcm");n&&null!==n&&"null"!==n&&this.api.post("drivers/edit_profile",{id:o.data.id,fcm_token:n}).then(o=>{console.log("user info=>",o)},o=>{console.log(o)}),console.log("--"),this.navCtrl.navigateRoot([""])}else console.log("not valid"),b.a.fire({title:this.util.translate("Error"),text:this.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:this.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(n=>{if(n&&n.value){const n={queryParams:{id:0,name:this.util.translate("Support"),uid:o.data.id}};this.router.navigate(["inbox"],n)}});else this.util.errorToast(o&&500===o.status?o.data.message:"Algo ha ido mal")},o=>{console.log(o),this.isLogin=!1,this.util.errorToast("Algo ha ido mal")})}}onPhoneLogin(o){if(console.log("form",o,this.mobile),console.log(this.mobile.ccCode+this.mobile.phone),this.submitted=!0,o.valid){const o={cc:this.mobile.ccCode,mobile:this.mobile.phone,password:this.mobile.password};console.log("param",o),this.isLogin=!0,this.api.post("drivers/loginWithPhoneAndPassword",o).then(o=>{if(this.isLogin=!1,console.log(o),o&&200===o.status)if("1"===o.data.status){localStorage.setItem("uid",o.data.id),this.util.userInfo=o.data;const n=localStorage.getItem("fcm");n&&null!==n&&"null"!==n&&this.api.post("driver/edit_profile",{id:o.data.id,fcm_token:n}).then(o=>{console.log("user info=>",o)},o=>{console.log(o)}),this.navCtrl.navigateRoot([""])}else console.log("not valid"),b.a.fire({title:this.util.translate("Error"),text:this.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:this.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(n=>{n&&n.value&&this.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:o.data.id}})});else this.util.errorToast(o&&500===o.status?o.data.message:"Algo ha ido mal")},o=>{console.log(o),this.isLogin=!1,this.util.errorToast("Algo ha ido mal")}).catch(o=>{console.log(o),this.isLogin=!1,this.util.errorToast("Algo ha ido mal")})}}onOTPLogin(o){if(console.log(this.mobileLogin),this.submitted=!0,o.valid){const o={mobile:this.mobileLogin.phone,cc:this.mobileLogin.ccCode};this.isLogin=!0,this.api.post("drivers/checkMobileNumber",o).then(o=>{this.isLogin=!1,console.log(o),o&&200===o.status?(console.log("open modal"),this.openModal(o.data.id)):this.util.errorToast(o&&500===o.status?o.data.message:"Algo ha ido mal")},o=>{console.log(o),this.isLogin=!1,this.util.errorToast("Algo ha ido mal")}).catch(o=>{console.log(o),this.isLogin=!1,this.util.errorToast("Algo ha ido mal")})}}openModal(o){return Object(a.a)(this,void 0,void 0,function*(){console.log("uid",o);const n=yield this.modalCtrl.create({component:u.a,componentProps:{code:this.mobileLogin.ccCode,phone:this.mobileLogin.phone}});n.onDidDismiss().then(n=>{console.log(n),n&&"ok"===n.role&&this.api.post("drivers/getById",{id:o}).then(n=>{if(console.log("user data",n),n&&200===n.status&&n.data&&n.data.length)if(this.util.userInfo=n.data[0],"1"===n.data[0].status){localStorage.setItem("uid",o);const n=localStorage.getItem("fcm");n&&null!==n&&"null"!==n&&this.api.post("drivers/edit_profile",{id:o,fcm_token:n}).then(o=>{console.log("user info=>",o)},o=>{console.log(o)}),this.navCtrl.navigateRoot([""])}else console.log("not valid"),b.a.fire({title:this.util.translate("Error"),text:this.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:this.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(n=>{n&&n.value&&this.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:o}})});else this.util.errorToast(n&&500===n.status?n.data.message:"Algo ha ido mal")},o=>{localStorage.removeItem("uid"),console.log(o)})}),n.present()})}resetPass(){this.router.navigate(["/forgot-password"])}register(){this.router.navigate(["register"])}ionViewWillEnter(){this.menuController.enable(!1)}ionViewWillLeave(){this.menuController.enable(!0)}openCountry(){return Object(a.a)(this,void 0,void 0,function*(){console.log("open ccode");const o=yield this.modalController.create({component:d.a,backdropDismiss:!1,showBackdrop:!0});o.onDidDismiss().then(o=>{console.log(o),o&&"selected"===o.role&&(console.log("ok"),this.mobile.ccCode="+"+o.data,this.mobileLogin.ccCode="+"+o.data)}),yield o.present()})}}return o.\u0275fac=function(n){return new(n||o)(p.Lb(s.g),p.Lb(h.a),p.Lb(r.a),p.Lb(l.V),p.Lb(g.a),p.Lb(l.T),p.Lb(l.U),p.Lb(l.U))},o.\u0275cmp=p.Fb({type:o,selectors:[["app-login"]],decls:8,vars:3,consts:[[1,"ion-padding"],[1,"login-logo"],["src","assets/imgs/icon.png","alt","foodies",1,"logo_icon"],[1,"login-name"],["novalidate","",4,"ngIf"],["novalidate",""],["loginForm","ngForm"],["lines","none"],["type","email","name","email","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],["color","danger"],[1,"ion-padding-start",3,"hidden"],["name","password","type","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],[1,"ion-no-margin","ion-no-padding"],[1,"frgTag",3,"click"],["type","submit","expand","block",1,"btn_class",3,"disabled","click"],[4,"ngIf"],["name","circles",4,"ngIf"],["name","circles"],["size","3",3,"click"],["disabled","true","type","text","name","ccode","spellcheck","false","autocapitalize","off","required","",2,"font-size","12px",3,"ngModel","ngModelChange"],["ccode","ngModel"],["size","9"],["type","number","name","mobile","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["phone","ngModel"]],template:function(o,n){1&o&&(p.Ob(0,"ion-content",0),p.Ob(1,"div",1),p.Mb(2,"img",2),p.Ob(3,"p",3),p.qc(4,"Iniciar sesi\xf3n"),p.Nb(),p.Nb(),p.pc(5,O,22,9,"form",4),p.pc(6,N,28,13,"form",4),p.pc(7,v,22,9,"form",4),p.Nb()),2&o&&(p.Ab(5),p.ec("ngIf","0"===n.util.user_login),p.Ab(1),p.ec("ngIf","1"===n.util.user_login),p.Ab(1),p.ec("ngIf","2"===n.util.user_login))},directives:[l.k,e.j,i.o,i.i,i.j,l.t,l.r,l.q,l.cb,i.n,i.h,i.k,l.K,l.A,l.j,l.h,l.F,l.X],styles:["ion-footer[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]{--box-shadow:none}ion-toolbar[_ngcontent-%COMP%]{border-color:none!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{--color:#fff}.login-logo[_ngcontent-%COMP%]{text-align:center;right:0;left:0;margin:20% auto 20px}.login-logo[_ngcontent-%COMP%]   .logo_icon[_ngcontent-%COMP%]{width:110px!important}.login-logo[_ngcontent-%COMP%]   .login-name[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.login-logo[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{margin:0;font-size:1rem}.frgTag[_ngcontent-%COMP%]{text-align:right;color:var(--ion-color-primary)}.btn_class[_ngcontent-%COMP%]{color:#fff;height:50px;--border-radius:5px}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px}.list[_ngcontent-%COMP%]{margin-bottom:0}ion-list[_ngcontent-%COMP%]{--ion-background-color:transparent;margin:0}ion-item[_ngcontent-%COMP%]{--ion-background-color:#f3f3f3;border-radius:5px!important;margin-top:10px}.createAcc[_ngcontent-%COMP%]{text-align:center}.createAcc[_ngcontent-%COMP%]   .registerTag[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700}.btns[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:10px 0}.btns[_ngcontent-%COMP%]   .flagActive[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;border:2px solid var(--ion-color-primary);margin:0 10px}.btns[_ngcontent-%COMP%]   .flagDeactive[_ngcontent-%COMP%]{height:45px;width:45px;margin:0 10px;opacity:.5}"]}),o})()}];let A=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=p.Jb({type:o}),o.\u0275inj=p.Ib({imports:[[s.i.forChild(L)],s.i]}),o})();var k=t("PCNd");let _=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=p.Jb({type:o}),o.\u0275inj=p.Ib({imports:[[e.b,i.e,l.Q,A,k.a]]}),o})()}}]);