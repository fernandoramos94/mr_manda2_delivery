!function(){function o(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function n(o,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{F4UR:function(e,t,i){"use strict";i.r(t),i.d(t,"LoginPageModule",function(){return T});var l=i("ofXK"),r=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),s=i("mrSG"),b=i("2Rin"),u=i("PSD3"),g=i.n(u),d=i("wljF"),p=i("hxji"),f=i("TCp9"),m=i("H+bZ"),h=i("fXoL");function v(o,n){1&o&&(h.Ob(0,"span"),h.qc(1,"INICIAR"),h.Nb())}function O(o,n){1&o&&h.Mb(0,"ion-spinner",19)}function C(o,n){if(1&o){var e=h.Pb();h.Ob(0,"form",5,6),h.Ob(2,"ion-list",7),h.Ob(3,"ion-item",7),h.Ob(4,"ion-input",8,9),h.Wb("ngModelChange",function(o){return h.lc(e),h.Yb().login.email=o}),h.Nb(),h.Nb(),h.Ob(6,"ion-text",10),h.Ob(7,"p",11),h.qc(8," Correo es requerido "),h.Nb(),h.Nb(),h.Ob(9,"ion-item",7),h.Ob(10,"ion-input",12,13),h.Wb("ngModelChange",function(o){return h.lc(e),h.Yb().login.password=o}),h.Nb(),h.Nb(),h.Ob(12,"ion-text",10),h.Ob(13,"p",11),h.qc(14," Contrase\xf1a es requerida "),h.Nb(),h.Nb(),h.Nb(),h.Ob(15,"ion-row",14),h.Ob(16,"ion-col",14),h.Ob(17,"p",15),h.Wb("click",function(){return h.lc(e),h.Yb().resetPass()}),h.qc(18,"Olvidaste tu contrase\xf1a?"),h.Nb(),h.Ob(19,"ion-button",16),h.Wb("click",function(){h.lc(e);var o=h.kc(1);return h.Yb().onLogin(o)}),h.pc(20,v,2,0,"span",17),h.pc(21,O,1,0,"ion-spinner",18),h.Nb(),h.Nb(),h.Nb(),h.Nb()}if(2&o){var t=h.kc(5),i=h.kc(11),l=h.Yb();h.Ab(4),h.ec("ngModel",l.login.email)("placeholder","Correo"),h.Ab(3),h.ec("hidden",t.valid||0==l.submitted),h.Ab(3),h.ec("ngModel",l.login.password)("placeholder","Contrase\xf1a"),h.Ab(3),h.ec("hidden",i.valid||0==l.submitted),h.Ab(6),h.ec("disabled",l.isLogin),h.Ab(1),h.ec("ngIf",!l.isLogin),h.Ab(1),h.ec("ngIf",l.isLogin)}}function M(o,n){if(1&o&&(h.Ob(0,"span"),h.qc(1),h.Nb()),2&o){var e=h.Yb(2);h.Ab(1),h.sc(" ",e.util.translate("Log In"),"")}}function N(o,n){1&o&&h.Mb(0,"ion-spinner",19)}function w(o,n){if(1&o){var e=h.Pb();h.Ob(0,"form",5,6),h.Ob(2,"ion-list",7),h.Ob(3,"ion-row"),h.Ob(4,"ion-col",20),h.Wb("click",function(){return h.lc(e),h.Yb().openCountry()}),h.Ob(5,"ion-item",7),h.Ob(6,"ion-input",21,22),h.Wb("ngModelChange",function(o){return h.lc(e),h.Yb().mobile.ccCode=o}),h.Nb(),h.Nb(),h.Nb(),h.Ob(8,"ion-col",23),h.Ob(9,"ion-item",7),h.Ob(10,"ion-input",24,25),h.Wb("ngModelChange",function(o){return h.lc(e),h.Yb().mobile.phone=o}),h.Nb(),h.Nb(),h.Ob(12,"ion-text",10),h.Ob(13,"p",11),h.qc(14),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(15,"ion-item",7),h.Ob(16,"ion-input",12,13),h.Wb("ngModelChange",function(o){return h.lc(e),h.Yb().mobile.password=o}),h.Nb(),h.Nb(),h.Ob(18,"ion-text",10),h.Ob(19,"p",11),h.qc(20),h.Nb(),h.Nb(),h.Nb(),h.Ob(21,"ion-row",14),h.Ob(22,"ion-col",14),h.Ob(23,"p",15),h.Wb("click",function(){return h.lc(e),h.Yb().resetPass()}),h.qc(24),h.Nb(),h.Ob(25,"ion-button",16),h.Wb("click",function(){h.lc(e);var o=h.kc(1);return h.Yb().onPhoneLogin(o)}),h.pc(26,M,2,1,"span",17),h.pc(27,N,1,0,"ion-spinner",18),h.Nb(),h.Nb(),h.Nb(),h.Nb()}if(2&o){var t=h.kc(11),i=h.kc(17),l=h.Yb();h.Ab(6),h.ec("ngModel",l.mobile.ccCode),h.Ab(4),h.ec("ngModel",l.mobile.phone)("placeholder",l.util.translate("Mobile Number")),h.Ab(3),h.ec("hidden",t.valid||0==l.submitted),h.Ab(1),h.sc(" ",l.util.translate("Phone number is required")," "),h.Ab(2),h.ec("ngModel",l.mobile.password)("placeholder",l.util.translate("Password")),h.Ab(3),h.ec("hidden",i.valid||0==l.submitted),h.Ab(1),h.sc(" ",l.util.translate("Password is required")," "),h.Ab(4),h.rc(l.util.translate("Forgot Password?")),h.Ab(1),h.ec("disabled",l.isLogin),h.Ab(1),h.ec("ngIf",!l.isLogin),h.Ab(1),h.ec("ngIf",l.isLogin)}}function k(o,n){if(1&o&&(h.Ob(0,"span"),h.qc(1),h.Nb()),2&o){var e=h.Yb(2);h.Ab(1),h.sc(" ",e.util.translate("Log In"),"")}}function P(o,n){1&o&&h.Mb(0,"ion-spinner",19)}function L(o,n){if(1&o){var e=h.Pb();h.Ob(0,"form",5,6),h.Ob(2,"ion-list",7),h.Ob(3,"ion-row"),h.Ob(4,"ion-col",20),h.Wb("click",function(){return h.lc(e),h.Yb().openCountry()}),h.Ob(5,"ion-item",7),h.Ob(6,"ion-input",21,22),h.Wb("ngModelChange",function(o){return h.lc(e),h.Yb().mobileLogin.ccCode=o}),h.Nb(),h.Nb(),h.Nb(),h.Ob(8,"ion-col",23),h.Ob(9,"ion-item",7),h.Ob(10,"ion-input",24,25),h.Wb("ngModelChange",function(o){return h.lc(e),h.Yb().mobileLogin.phone=o}),h.Nb(),h.Nb(),h.Ob(12,"ion-text",10),h.Ob(13,"p",11),h.qc(14),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(15,"ion-row",14),h.Ob(16,"ion-col",14),h.Ob(17,"p",15),h.Wb("click",function(){return h.lc(e),h.Yb().resetPass()}),h.qc(18),h.Nb(),h.Ob(19,"ion-button",16),h.Wb("click",function(){h.lc(e);var o=h.kc(1);return h.Yb().onOTPLogin(o)}),h.pc(20,k,2,1,"span",17),h.pc(21,P,1,0,"ion-spinner",18),h.Nb(),h.Nb(),h.Nb(),h.Nb()}if(2&o){var t=h.kc(11),i=h.Yb();h.Ab(6),h.ec("ngModel",i.mobileLogin.ccCode),h.Ab(4),h.ec("ngModel",i.mobileLogin.phone)("placeholder",i.util.translate("Mobile Number")),h.Ab(3),h.ec("hidden",t.valid||0==i.submitted),h.Ab(1),h.sc(" ",i.util.translate("Phone number is required")," "),h.Ab(4),h.rc(i.util.translate("Forgot Password?")),h.Ab(1),h.ec("disabled",i.isLogin),h.Ab(1),h.ec("ngIf",!i.isLogin),h.Ab(1),h.ec("ngIf",i.isLogin)}}var A,x,_,y=[{path:"",component:(A=function(){function e(n,t,i,l,r,a,c,s){o(this,e),this.router=n,this.api=t,this.util=i,this.navCtrl=l,this.oneSignal=r,this.menuController=a,this.modalController=c,this.modalCtrl=s,this.login={email:"",password:""},this.mobile={ccCode:"",phone:"",password:""},this.mobileLogin={ccCode:"",phone:""},this.submitted=!1,this.isLogin=!1,console.log("--------------- user login",this.util.user_login),this.mobile.ccCode="+91",this.mobileLogin.ccCode="+91",this.oneSignal.getIds().then(function(o){console.log("iddddd==========",o),localStorage.setItem("fcm",o.userId)})}var t,i,l;return t=e,(i=[{key:"ngOnInit",value:function(){}},{key:"onLogin",value:function(o){var n=this;if(console.log("form",o),this.submitted=!0,o.valid){if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.login.email))return this.util.showToast(this.util.translate("Please enter valid email"),"danger","bottom"),!1;console.log("login"),this.isLogin=!0,this.api.post("drivers/login",this.login).then(function(o){if(n.isLogin=!1,console.log(o),o&&200===o.status)if("1"===o.data.status){localStorage.setItem("uid",o.data.id),n.util.userInfo=o.data,n.menuController.enable(!0);var e=localStorage.getItem("fcm");e&&null!==e&&"null"!==e&&n.api.post("drivers/edit_profile",{id:o.data.id,fcm_token:e}).then(function(o){console.log("user info=>",o)},function(o){console.log(o)}),console.log("--"),n.navCtrl.navigateRoot([""])}else console.log("not valid"),g.a.fire({title:n.util.translate("Error"),text:n.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:n.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(function(e){if(e&&e.value){var t={queryParams:{id:0,name:n.util.translate("Support"),uid:o.data.id}};n.router.navigate(["inbox"],t)}});else n.util.errorToast(o&&500===o.status?o.data.message:"Algo ha ido mal")},function(o){console.log(o),n.isLogin=!1,n.util.errorToast("Algo ha ido mal")})}}},{key:"onPhoneLogin",value:function(o){var n=this;if(console.log("form",o,this.mobile),console.log(this.mobile.ccCode+this.mobile.phone),this.submitted=!0,o.valid){var e={cc:this.mobile.ccCode,mobile:this.mobile.phone,password:this.mobile.password};console.log("param",e),this.isLogin=!0,this.api.post("drivers/loginWithPhoneAndPassword",e).then(function(o){if(n.isLogin=!1,console.log(o),o&&200===o.status)if("1"===o.data.status){localStorage.setItem("uid",o.data.id),n.util.userInfo=o.data;var e=localStorage.getItem("fcm");e&&null!==e&&"null"!==e&&n.api.post("driver/edit_profile",{id:o.data.id,fcm_token:e}).then(function(o){console.log("user info=>",o)},function(o){console.log(o)}),n.navCtrl.navigateRoot([""])}else console.log("not valid"),g.a.fire({title:n.util.translate("Error"),text:n.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:n.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(function(e){e&&e.value&&n.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:o.data.id}})});else n.util.errorToast(o&&500===o.status?o.data.message:"Algo ha ido mal")},function(o){console.log(o),n.isLogin=!1,n.util.errorToast("Algo ha ido mal")}).catch(function(o){console.log(o),n.isLogin=!1,n.util.errorToast("Algo ha ido mal")})}}},{key:"onOTPLogin",value:function(o){var n=this;if(console.log(this.mobileLogin),this.submitted=!0,o.valid){var e={mobile:this.mobileLogin.phone,cc:this.mobileLogin.ccCode};this.isLogin=!0,this.api.post("drivers/checkMobileNumber",e).then(function(o){n.isLogin=!1,console.log(o),o&&200===o.status?(console.log("open modal"),n.openModal(o.data.id)):n.util.errorToast(o&&500===o.status?o.data.message:"Algo ha ido mal")},function(o){console.log(o),n.isLogin=!1,n.util.errorToast("Algo ha ido mal")}).catch(function(o){console.log(o),n.isLogin=!1,n.util.errorToast("Algo ha ido mal")})}}},{key:"openModal",value:function(o){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var e,t=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("uid",o),n.next=3,this.modalCtrl.create({component:f.a,componentProps:{code:this.mobileLogin.ccCode,phone:this.mobileLogin.phone}});case 3:(e=n.sent).onDidDismiss().then(function(n){console.log(n),n&&"ok"===n.role&&t.api.post("drivers/getById",{id:o}).then(function(n){if(console.log("user data",n),n&&200===n.status&&n.data&&n.data.length)if(t.util.userInfo=n.data[0],"1"===n.data[0].status){localStorage.setItem("uid",o);var e=localStorage.getItem("fcm");e&&null!==e&&"null"!==e&&t.api.post("drivers/edit_profile",{id:o,fcm_token:e}).then(function(o){console.log("user info=>",o)},function(o){console.log(o)}),t.navCtrl.navigateRoot([""])}else console.log("not valid"),g.a.fire({title:t.util.translate("Error"),text:t.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:t.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(function(n){n&&n.value&&t.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:o}})});else t.util.errorToast(n&&500===n.status?n.data.message:"Algo ha ido mal")},function(o){localStorage.removeItem("uid"),console.log(o)})}),e.present();case 5:case"end":return n.stop()}},n,this)}))}},{key:"resetPass",value:function(){this.router.navigate(["/forgot-password"])}},{key:"register",value:function(){this.router.navigate(["register"])}},{key:"ionViewWillEnter",value:function(){this.menuController.enable(!1)}},{key:"ionViewWillLeave",value:function(){this.menuController.enable(!0)}},{key:"openCountry",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var n,e=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("open ccode"),o.next=3,this.modalController.create({component:p.a,backdropDismiss:!1,showBackdrop:!0});case 3:return(n=o.sent).onDidDismiss().then(function(o){console.log(o),o&&"selected"===o.role&&(console.log("ok"),e.mobile.ccCode="+"+o.data,e.mobileLogin.ccCode="+"+o.data)}),o.next=7,n.present();case 7:case"end":return o.stop()}},o,this)}))}}])&&n(t.prototype,i),l&&n(t,l),e}(),A.\u0275fac=function(o){return new(o||A)(h.Lb(c.g),h.Lb(m.a),h.Lb(b.a),h.Lb(a.V),h.Lb(d.a),h.Lb(a.T),h.Lb(a.U),h.Lb(a.U))},A.\u0275cmp=h.Fb({type:A,selectors:[["app-login"]],decls:8,vars:3,consts:[[1,"ion-padding"],[1,"login-logo"],["src","assets/imgs/icon.png","alt","foodies",1,"logo_icon"],[1,"login-name"],["novalidate","",4,"ngIf"],["novalidate",""],["loginForm","ngForm"],["lines","none"],["type","email","name","email","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],["color","danger"],[1,"ion-padding-start",3,"hidden"],["name","password","type","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],[1,"ion-no-margin","ion-no-padding"],[1,"frgTag",3,"click"],["type","submit","expand","block",1,"btn_class",3,"disabled","click"],[4,"ngIf"],["name","circles",4,"ngIf"],["name","circles"],["size","3",3,"click"],["disabled","true","type","text","name","ccode","spellcheck","false","autocapitalize","off","required","",2,"font-size","12px",3,"ngModel","ngModelChange"],["ccode","ngModel"],["size","9"],["type","number","name","mobile","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["phone","ngModel"]],template:function(o,n){1&o&&(h.Ob(0,"ion-content",0),h.Ob(1,"div",1),h.Mb(2,"img",2),h.Ob(3,"p",3),h.qc(4,"Iniciar sesi\xf3n"),h.Nb(),h.Nb(),h.pc(5,C,22,9,"form",4),h.pc(6,w,28,13,"form",4),h.pc(7,L,22,9,"form",4),h.Nb()),2&o&&(h.Ab(5),h.ec("ngIf","0"===n.util.user_login),h.Ab(1),h.ec("ngIf","1"===n.util.user_login),h.Ab(1),h.ec("ngIf","2"===n.util.user_login))},directives:[a.k,l.j,r.o,r.i,r.j,a.t,a.r,a.q,a.cb,r.n,r.h,r.k,a.K,a.A,a.j,a.h,a.F,a.X],styles:["ion-footer[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]{--box-shadow:none}ion-toolbar[_ngcontent-%COMP%]{border-color:none!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{--color:#fff}.login-logo[_ngcontent-%COMP%]{text-align:center;right:0;left:0;margin:20% auto 20px}.login-logo[_ngcontent-%COMP%]   .logo_icon[_ngcontent-%COMP%]{width:110px!important}.login-logo[_ngcontent-%COMP%]   .login-name[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.login-logo[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{margin:0;font-size:1rem}.frgTag[_ngcontent-%COMP%]{text-align:right;color:var(--ion-color-primary)}.btn_class[_ngcontent-%COMP%]{color:#fff;height:50px;--border-radius:5px}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px}.list[_ngcontent-%COMP%]{margin-bottom:0}ion-list[_ngcontent-%COMP%]{--ion-background-color:transparent;margin:0}ion-item[_ngcontent-%COMP%]{--ion-background-color:#f3f3f3;border-radius:5px!important;margin-top:10px}.createAcc[_ngcontent-%COMP%]{text-align:center}.createAcc[_ngcontent-%COMP%]   .registerTag[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700}.btns[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:10px 0}.btns[_ngcontent-%COMP%]   .flagActive[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;border:2px solid var(--ion-color-primary);margin:0 10px}.btns[_ngcontent-%COMP%]   .flagDeactive[_ngcontent-%COMP%]{height:45px;width:45px;margin:0 10px;opacity:.5}"]}),A)}],I=((x=function n(){o(this,n)}).\u0275fac=function(o){return new(o||x)},x.\u0275mod=h.Jb({type:x}),x.\u0275inj=h.Ib({imports:[[c.i.forChild(y)],c.i]}),x),q=i("PCNd"),T=((_=function n(){o(this,n)}).\u0275fac=function(o){return new(o||_)},_.\u0275mod=h.Jb({type:_}),_.\u0275inj=h.Ib({imports:[[l.b,r.e,a.Q,I,q.a]]}),_)}}])}();